{
  "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
  "handler": "Microsoft.Azure.CreateUIDef",
  "version": "0.1.2-preview",
  "parameters": {
    "basics": [{}],
    "steps": [
      {
        "name": "settings",
        "label": "Settings",
        "subLabel": {
          "preValidation": "Configure the infrastructure settings",
          "postValidation": "Done"
        },
        "bladeTitle": "Settings",
        "elements": [
          {
            "name": "storageAccounts",
            "type": "Microsoft.Storage.MultiStorageAccountCombo",
            "label": {
              "type": "Storage account type",
              "prefix": "Storage account name prefix"
            },
            "defaultValue": {
              "type": "Standard_LRS",
              "prefix": "comppoc"
            },
            "constraints": {
              "allowedTypes": ["Premium_LRS", "Standard_LRS", "Standard_GRS"]
            }
          },
          {
            "name": "securityAutomationNamePrefix",
            "type": "Microsoft.Common.TextBox",
            "label": "Security automation name prefix",
            "defaultValue": "CompliancePoC"
          },
          {
            "name": "eventHubConnectionString",
            "type": "Microsoft.Common.TextBox",
            "label": "Event Hub connection string",
            "constraints": {
              "required": true
            }
          },
          {
            "name": "eventHubResourceId",
            "type": "Microsoft.Common.TextBox",
            "label": "Event Hub resource id",
            "constraints": {
              "required": true
            }
          },
          {
            "name": "eventHubPolicyName",
            "type": "Microsoft.Common.TextBox",
            "label": "Event Hub policy name",
            "constraints": {
              "required": true
            }
          }
        ]
      }
    ],
    "outputs": {
      "storageAccountNamePrefix": "[steps('settings').storageAccounts.prefix]",
      "storageAccountType": "[steps('settings').storageAccounts.type]",
      "securityAutomationNamePrefix": "[steps('settings').securityAutomationNamePrefix]",
      "eventHubConnectionString": "[steps('settings').eventHubConnectionString]",
      "eventHubResourceId": "[steps('settings').eventHubResourceId]",
      "eventHubPolicyName": "[steps('settings').eventHubPolicyName]",
      "location": "[location()]"
    }
  }
}
